{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Chat Interface</title>
    <meta name="csrf-token" content="{{ csrf_token }}">
    <link rel="stylesheet" href="{% static 'myapp/chat.css' %}">
    <link rel="icon" href="{% static 'favicon.ico' %}" type="image/x-icon">
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.0/css/all.min.css" integrity="sha512-9xKTRVabjVeZmc+GUW8GgSmcREDunMM+Dt/GrzchfN8tkwHizc5RP4Ok/MXFFy5rIjJjzhndFScTceq5e6GvVQ==" crossorigin="anonymous" referrerpolicy="no-referrer">
    <script src="{% static 'chat.js' %}" defer></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Plus Jakarta Sans', sans-serif;
        }
        
        body {
            background-size: cover;
            background-image: url("{% static 'images/bg2.jpg' %}");
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            height: 100vh;
        }  
    </style>
</head>
<body>

    <div class="header-container">
        <header>
            <div class="logo-image">
                <img src="{% static 'myapp/images/logo.png' %}" alt="NurtureMe Logo" class="logo-image">
            </div>
        </header>
    </div>

    <!-- Floating Navigation Bar -->
    <div id="navbar" class="navbar">
        <div class="nav-button" onclick="toggleMenu()">
            <span>&#9776;</span>
        </div>
        <div class="nav-content">
            <a href="#home"id="home-button" data-home-url="{% url 'index2' %}">
                <i class="fa-solid fa-house" style="color: #ffffff;" alt="Home" class="nav-icon"></i>
                <span>Home</span>
            </a>
            <a href="#about">
                <i class="fa-solid fa-circle-info" style="color: #ffffff;" alt="About" class="nav-icon"></i>
                <span>About</span>
            </a>
            <a href="#products">
                <i class="fa-solid fa-bag-shopping" style="color: #ffffff;" alt="Products" class="nav-icon"></i>                
                <span>Products</span>
            </a>
            <a href="#webcam">
                <i class="fa-solid fa-camera" style="color: #ffffff;" alt="Capture" class="nav-icon"></i>
                <span>Capture</span>
            </a>
            <a href="#contact">
                <i class="fa-solid fa-envelope" style="color: #ffffff;" alt="Contact" class="nav-icon"></i>
                <span>Contact us</span>
            </a>
            <a href="#logout" id="logout-button">
                <i class="fa-solid fa-arrow-right-from-bracket" style="color: #ffffff;" alt="Log Out" class="nav-icon"></i>  
                <span>Log out</span>
            </a>
        </div>
    </div>

    <div class="chat-container">
        <div class="chat-header">
            <div class="status-indicator"></div>
            <h2>LUMI</h2>
        </div>
        
        <div class="messages-container" id="messages">
            <div class="message bot">Hello this Lumi, an AI assitant. How can I help you today?</div>
        </div>

        <div class="typing-indicator" id="typing">
            <span></span>
            <span></span>
            <span></span>
        </div>

        <div class="input-container">
            <input type="text" class="message-input" id="userInput" placeholder="Type your message...">
            <button class="send-button" id="sendButton">Send</button>
        </div>
    </div>

    <script>


        const messagesContainer = document.getElementById('messages');
        const userInput = document.getElementById('userInput');
        const sendButton = document.getElementById('sendButton');
        const typingIndicator = document.getElementById('typing');

        function addMessage(message, isUser) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${isUser ? 'user' : 'bot'}`;
            messageDiv.textContent = message;
            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function simulateTyping() {
            typingIndicator.style.display = 'block';
            setTimeout(() => {
                typingIndicator.style.display = 'none';
                addMessage('This is a simulated response from the AI assistant.', false);
            }, 2000);
        }

        function handleSend() {
            const message = userInput.value.trim();
            if (message) {
                addMessage(message, true);
                userInput.value = '';
                simulateTyping();
            }
        }

        sendButton.addEventListener('click', handleSend);
        userInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                handleSend();
            }
        });



        function toggleMenu() {
            const navbar = document.getElementById('navbar');
            navbar.classList.toggle('expanded');
        }
        const logoutRedirectUrl = "{% url 'index1' %}";
        const homeRedirectUrl = "{% url 'index2' %}";
    </script>
</body>
</html>